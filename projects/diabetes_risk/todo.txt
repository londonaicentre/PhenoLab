# TODO
# [x] which patients?
# [x] what about patients coded as diabetic who are no longer diabetic?
# [x] once have sorted that out, need to join together the two tables to get all diabetic patients and whether they were diagnosed by code or found by us
# [ ] Dan's tables - but Dan uses different HbA1c definition to me!
# [x] hba1c trajectories
# [x] final hba1c distribution
# [x] feature store needs a refresh function
# [x] age - distribution and relationship to final hba1c
# [x] create feature pipeline function
# [x] exclude certain hba1cs as per jordan
# [x] need to plot/examine the units issue in more detail
# [ ] need to check we're still in the ref period for codes
# [x] feature store changes and then feature changes
# [x] simplify features
# [ ] retire notebooks?
# [ ] need to add in IMD/work out how to encode - took it out because categorical
# [x] discuss hba1c selection with dan
# [ ] should probably round hba1cs to whole numbers to avoid false precision
# [x] add marimo to requirements
# [ ] see what codes Dan has in defintion and if happy with this list
# [ ] medications
# [ ] medicine compliance
# [x] look into BMI classification in more detail and consider whether could be continuous
# [x] weight or BMI change
# [x] BMI should not backwards contaminate
# [ ] colinearity in how I've coded features?
# [ ] eGFR* - talk to Dan
# [ ] need to sort out clinical effective date vs date recorded. Also Age_at_event
# [x] endpoint flags
# [ ] fix the neuropathy weird naming things and found out why it happened
# [ ] look into TimeXGB
# [ ] use phenotypes not just definitions?
# [ ] look into xgb ordinal classification/look into having 2 loss functions
# [ ] >>>>need an age at start of observation period feature!
# [ ] >>>>need to take out outcome period variables!
# [ ] once have put in all extra features, check original feature table
# [x] take out rouge output variables
# [ ] look further into XGB parameters
# [ ] try linear logistic regression
# [ ] try binary output prediction (or include those who stay the same?)
# [ ] predict deteriorators
# [ ] type up readme and plots
# [ ] snowpark modelling
# [ ] model regsistry use
# [ ] NCL presentation/slides
# [ ] problem end date
# [ ] medication tables **
# [ ] check PMI table
# [ ] multiple outcomes per patient 
# [ ] variance in binned 2/5yr reading
# [ ] more granular time-series values?
# [ ] pdc score - per drug class
# [ ] exclude young people (how are they getting in there anyway?!)

