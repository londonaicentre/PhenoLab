(1) deployment from localhost -> snowflake
x definition_library needs to become part of phenolab
x fix dependencies
x fix connection to snowflake
x fix definition_library backend
x fix update.py. Is update.py the best way to do things? at least change the session management
x dependencies on streamlit is an issue...go to static downloads
x temp tables
x openpyxl
x check whether feature store manager still works after refactoring of connection
- NHS GP table
- NEL segments -> their own table
x retrieving bnf definitions is very slow
x maybe should/check fix 'uploaded datetime', especially for those where doing asynchronous upload
x fix the database/schema defaults because I think i did them wrong
x tidy up main page appearance
x update definition_library readme.md
x page to browse by source

(2a) CI approach
x github actions
x dev and prod

(2b) ICB table with 'starterpack' model
x create ICB table
x definitions should go to ICB table
x UNLESS we create them as jsons/export as jsons
x debugging mode
x fix problem with new jsons
x 'Edit existing' needs to be either jsons or table according to whether local or remote
x fix bug when no definition is selected
x don't allow duplicate name uploads to ICB table/decide how to do versioning in case of edits
x need to change definition behaviour to have proper versioning or else can't do edits to table-stored definitions
x 'View & Upload' tab

(3) external definitions starterpack
x done 

(4) aesthetic changes
x colour scheme
- reduce labels/visual clutter
x rename definition panels

(5) general/misc
x redundant imports!
x get rid of some of the database utils functions
x do I need to be calling (a) session and (b) config as function imports?? (No - session state seems to exist across 
imports too)

(5b) ICB-specific config
x check if config in PHMutils should be part of phenolab or more likely, switch to a config file
x see if the config is a good idea/should be refactored/homogenised with database/schema
x refactor
x get rid of load_dotenv?
x see if can use get_account() to select config file
x config for environmental variables
x local config
x environment.yml fix (could it be packaging as snowflake native app?)
x people should be using snowflake config rather than .env - replace examples
x explain all in readme

(5c) tidying
x finish converting away from Snowflake Connection & context manager to explicit management
- move all version control into definition.py class
x should probably extract all session fetching and just put it in session_state as part of the setup
x could make one function that did all the page setting up/checking the session_state e.g. for the configs

(5d) search definitions page
x page to search definition titles and then see codes within

(6) delete definition option
- add tab to page 2 to delete definition versions, both jsons and on database

(7) phenotypes
x how to turn into SQL? (or should we remove from interface)

(8) measurements
x fix load definition
x fix load definition in page 2
x *measurement config files -> remote version - how to?
x measurement config tables
x fill on load
x per ICB
x deployment versions -> viewer for ICBs
x version for us -> disentangle counts??
x need button for us to update configs?
x why is ai_centre-definitions in dev version empty?

(9) vocab loading
x push further down list

(10) base features
x *need to add definition version to base features?
x *is it one per person or all?
x sort out pipeline/features_base
x need to sort out config thingy as have made config part of phenolab
x get rid of pipeline folder

(12) snowflake feature store/get rid of feature store altogether
x *choose best option

(14) remote deployment
x need to push up again

------------
To do post-meeting:
(1) Dev/prod approach
x create prod stage
x bash script
x copy PHM london to prod stage
x need to have a different title for phenolab dev - may need to parameterise Snowflake.yml
x dev definition definition_library
x dev feature store
x generate config files according to env and ICB
x deletes scripts locally
x breaking due to missing definition...need to fix
x change dev schemas in config file and see if app still works
x integrate local development mode into dev and prod? nel_icb_local.yml? think about how will run locally without bash
script
x does the ICB table need to be blocked in local development mode?/other tables?
x Definition store view as setup script?
x ?dynamically generate snowflake.yml/parameterise for warehouse name
x bash script might need to move up one level?
x update readme (including making deploy.sh executable)

(1b) bnf
x try pre-generating BNF files for speed

(2) ?Setup scripts
x base features (pipeline/features base)

(3) Measurements
x configs -> to tables
x test in dev
x make ICB specific
x interface for ICBs to view configs in table
x check our existing interface still makes sense
x look at Dan's code
x check have Dan's quartile changes
x clean too high and too low values
- graph? overall distribution with high and low vals in red

(3b) Base Features
x take out feature store manager

(4) Definitions -> base features
x use latest version

(5) Extra features
x search definitions
- delete definitions (then need to also be removing them from DB on load)

(6) phenotypes
x remove

(6B) 'Browse the Feature store' page
x What to do with this?

(7) decouple from PHM utils
x get rid of feature store
x move definition.py
x remove snowutils
x remove boto3 as requirement
x remove phmlondon

(8) tidying
x move main phenolab to stage in its own schema?
x reorganise repo?

(9) readme updates
x internal inc for phenolab deployment and development/external

(10) feature store
x fix in dev

(11) tidying up
- test both deployments and check they work without phmlondon
x add git lfs to readme/ mega CSV to parquet
x read me clean up (x2)
x consider: https://medium.com/@emily-nguyen/streamlit-in-snowflake-sis-managing-session-context-for-simplified-development-e5f9fa7e3008

(12) finishing
- need to do the actual measurment mappings